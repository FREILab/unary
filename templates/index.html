<!doctype html>

<html lang="de">
<head>
	<meta charset="utf-8">

	<title>Getränke</title>
	<meta name="description" content="Freilab Getränkeabrechnungssystem">
	<meta name="author" content="Johannes Jordan">
	<link rel="icon" href="{{ url_for('static', filename='icon/favicon.ico') }}">
	{% for file in assets.css %}
	<link rel="stylesheet" href="{{ url_for('static', filename='css/'+file+'.css') }}">
	{% endfor %}
	{% for file in assets.js %}
	<script defer src="{{ url_for('static', filename='js/'+file+'.js') }}"></script>
	{% endfor %}
	<script>let initial = {{ payload|tojson|safe }};</script>
</head>
<body>
	<noscript>
		<style>#app { display:none; }</style>
		<div class="alert alert-danger" role="alert">Please enable Javascript to make this work.</div>
	</noscript>
	{% raw %}
	<div id='app'>
		<b-alert variant="success" dismissible show>Bassd.</b-alert>
		<transition-group name="slide" class="slide" tag="div">
		<b-container key="products" v-show="current_user" fluid>
			<b-row align-h="between">
				<b-col cols="7">
					<h1>{{ current_user ? current_user.username : 'niemand' }}, was möchtest du?</h1>
				</b-col>
				<b-col cols="3">
					<b-button variant="primary" v-on:click="deselect_user" block size="lg">Fertig</b-button>
				</b-col>
			</b-row>
			<b-card-group deck>
				<b-card v-for="p in products" :key="p.id"
					:title="p.name"
					:img-src="'static/img/products/' + p.picture"
					img-top img-fluid
					body-class="d-flex flex-column"
					class="mb-4"
					>
					<h6 slot="header" class="mb-0">
						<strong>{{ p.size }}</strong>
						<span v-if="p.isOrganic"><i class="text-success fas fa-leaf"></i></span>
					</h6>
					<b-button class="mt-auto" block size="lg" variant="outline-success" v-on:click="buy(p)">
						<h1>€ <strong>{{ format_prize(p.prize) }}</strong></h1>
					</b-button>
				</b-card>
			</b-card-group>
		</b-container>
		<b-container key="users" v-show="current_user == null" fluid>
			<h1>Nutzer</h1>
			<ul id="users">
				<li v-for="u in users" :key="u.id">
					<b-link v-if="current_user != u" v-on:click="select_user(u)">{{ u.username }}</b-link>
					<span v-else>{{ u.username }}</span>
				</li>
			</ul>
		</b-container>
		</transition-group>
	</div>
	{% endraw %}
</body>
</html>
